!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4);function a(e,t,r=!1){let n;const s=t[t.length-1];if(n=t[0]instanceof HTMLElement?t[0]:o(t[0])?document.createElement(t[0]):document.createTextNode(t[0]),Array.isArray(s)&&s.length>0)for(let e of s)a(n,e);if(t.length>2){const e=t[1];Object.keys(e).forEach(t=>n.setAttribute(t,e[t]))}return r?e.prepend(n):e.append(n),e}t.render=a,t.isLoggedIn=()=>{try{document.querySelector("table[summary] tbody tr td h1 + *").innerText}catch(e){return!1}};const o=e=>{try{return"[object HTMLUnknownElement]"!==document.createElement(e).toString()}catch(e){return!1}};t.toArray=e=>[].slice.call(e),t.safeQuery=e=>{try{return e()}catch(e){return null}},t.removeBrackets=e=>e.substring(1,e.length-1),t.getCategoryGroups=(e=document)=>t.safeQuery(()=>{let r;return r=localStorage.getItem("categoryGroups"),r?JSON.parse(r):(r=t.toArray(e.querySelectorAll("a[name='top'] + table.boards tr td.l")).map(e=>{const r=t.toArray(e.querySelectorAll("a"));return{heading:{title:r[0].innerText,link:r[0].href},categories:r.slice(1).map(e=>({title:e.innerText,link:e.href}))}}),localStorage.setItem("categoryGroups",JSON.stringify(r)),r)}),t.saveThread=(e,r)=>{const n=JSON.parse(localStorage.getItem("savedThreads")||"[]")||[];n.find(({link:e})=>e===r.link)||n.push(r),localStorage.setItem("savedThreads",JSON.stringify(n)),e.textContent="saved",e.onclick=function(e){t.deleteThread(e.target,r)}},t.deleteThread=(e,r)=>{const n=JSON.parse(localStorage.getItem("savedThreads")||"[]")||[],a=n.findIndex(e=>e.link===r.link);a>-1&&n.splice(a),localStorage.setItem("savedThreads",JSON.stringify(n)),e.textContent="save thread",e.onclick=function(e){t.saveThread(e.target,r)}},t.showModal=()=>{a(document.body,n.SavedThreadsModal())}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0);t.el=(e,t={},...r)=>[e,t,r],t.t=e=>[String(e)],t.Container=(e,...r)=>t.el("div",Object.assign({class:"th-container "+(e.class||"")},e),...r),t.AuthHeader=()=>[],t.Header=()=>{const e={home:"/",new:"/new",recent:"/recent",trending:"/trending",login:"/login","sign up":"/register"};return t.el("header",{},t.Logo(),t.el("nav",{},t.el("ul",{},...Object.keys(e).map(r=>t.el("li",{},t.el("a",{href:e[r],class:"btn "+("login"==r?"primary":"")},t.t(r)))).concat(localStorage.getItem("savedThreads")?[t.SavedThreadsLi()]:[]))))},t.SavedThreadsLi=()=>{const e=document.createElement("li");return e.classList.add("btn"),e.textContent="saved threads",e.onclick=n.showModal,[e]},t.Hero=()=>t.el("div",{class:"hero"},t.Logo("h2","big"),t.el("form",{action:"/search",class:"search"},t.el("input",{name:"query",placeholder:"Topic, Thread, Phrase, News, Information..."}),t.el("button",{type:"submit"},t.t("Submit")))),t.Logo=(e="h1",t="")=>{const r=document.createElement(e);return r.classList.add("logo"),t.split(" ").filter(e=>e).forEach(e=>r.classList.add(e)),r.innerHTML="&#8358;airaland Forum",[r]},t.QuoteIcon=()=>{const e=document.createElement("span");return e.innerHTML='<svg class="reaction" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg>',[e]},t.HeartIcon=()=>{const e=document.createElement("span");return e.innerHTML='<svg class="reaction" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path></svg>',[e]};t.ThreadBoard=(e,r,n,a="Latest News")=>t.el("main",{},l(e,n,a),u(r)),t.Thread=(e,r)=>t.el("div",{class:"thread"},...e.map(e=>o(e,r))),t.ThreadMetaComp=e=>t.el("div",{class:"thread-meta"},t.el("div",{class:"wrapper"},t.el("div",{class:"details"},t.el("h1",{},t.t(e.title)),t.el("p",{class:"pub-meta"},t.t("by "),t.el("a",{class:"author"},t.t(e.author)),t.t(": "),t.el("span",{class:"time"},t.t(e.timeOfPub)))),a(e)));const a=e=>{const t=(JSON.parse(localStorage.getItem("savedThreads")||"[]")||[]).find(t=>t.link===e.link),r=document.createElement("button");return r.classList.add("save"),t?(r.textContent="saved",r.onclick=function(e){n.deleteThread(e.target,t)}):(r.textContent="save thread",r.onclick=function(t){n.saveThread(t.target,e)}),[r]},o=(e,r)=>t.el("div",{class:"post-wrapper"},s(e,r),t.el("div",{class:"reactions"},t.el("button",{class:"quote"},t.QuoteIcon()),t.el("button",{class:"like"},t.HeartIcon(),t.el("span",{},t.t(e.likes))),t.el("button",{class:"share"},(()=>{const e=document.createElement("span");return e.innerHTML='<svg class="reaction" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"></path></svg>',[e]})(),t.el("span",{},t.t(e.shares))))),s=(e,r)=>{const a=document.createElement("div");return a.classList.add("post"),a.innerHTML=e.html,e.author===r.author&&e.timeOfPub===r.timeOfPub||n.render(a,t.el("div",{class:"meta"},t.el("div",{},t.el("p",{},t.el("a",{class:"author",href:"/"+e.author},t.t(e.author)),t.t(" commented on "),t.el("a",{class:"author",href:"/"+e.replyingTo},t.t(e.replyingTo))),t.el("p",{},t.t(e.timeOfPub)))),!0),[a]},l=(e,r,n)=>t.el("section",{class:"threads"},t.el("h2",{class:"heading"},t.t(n)),t.el("div",{class:"posts"},...e.map(e=>t.el("a",{class:"link post",href:e.link},t.t(e.title)))),c(r),d(),i()),c=e=>t.el("div",{class:"pagination"},...e.map(e=>t.el("a",{class:"link page "+e.current,href:e.link},t.t(e.page)))),d=()=>t.el("div",{class:"gototop"},t.t("Go to the top")),i=()=>t.el("p",{class:"disclaimer"},t.t("Every member of Nairaland is solely responsible for what he or she posts on Nairaland.")),u=e=>t.el("aside",{class:"category-nav"},...e.map(e=>h(e))),h=e=>t.el("div",{class:"categories"},t.el("h2",{class:"heading"},t.t(e.heading.title)),...e.categories.map(e=>t.el("a",{class:"link category "+e.current,href:e.link},t.t(e.title))))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,l)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=r(3),o=r(5),s=r(6),l=r(7),c=r(0);!function(){var e;n(this,void 0,void 0,(function*(){if(!localStorage.getItem("categoryGroups")){const e=(yield window.fetch("https://www.nairaland.com").then(e=>e.text())).match(/<body>([\w\W\s]*?)<\/body>/)[1],t=document.createElement("div");t.innerHTML=e,c.getCategoryGroups(t)}const t=document.createElement("link"),r=document.createElement("link"),n=document.createElement("link");t.rel="preconnect",t.href="https://fonts.gstatic.com",r.rel="stylesheet",r.href="https://fonts.googleapis.com/css2?family=Roboto&display=swap",n.rel="stylesheet",n.href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap";const d=document.head.querySelector('link[type="text/css"]');null==d||d.remove(),document.head.append(t,r,n),null===(e=document.querySelector(".body"))||void 0===e||e.classList.add("hidden");const i=new URL(window.location.href).pathname,u=JSON.parse(localStorage.getItem("categoryGroups")||"[]"),h=u.map(e=>e.categories).reduce((e,t)=>e.concat(t),[]).find(e=>i.startsWith(new URL(e.link).pathname));if(h)h.current="current",l.renderBoard(u,h.title);else if(/^\/(\d+)\/.*/.test(i))s.renderThread(i.match(/^\/(\d+)\/.*/)[1]);else switch(!0){case"/"==i:c.render(document.body,a.IndexPage());break;case i.startsWith("/news"):c.render(document.body,o.NewsPage());break;default:document.querySelector(".body").classList.remove("hidden"),document.head.append(d)}}))}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),a=r(0);t.IndexPage=function(){const e=a.safeQuery(()=>a.toArray(document.querySelectorAll("table.boards tbody tr td.featured.w a")).map(e=>({title:e.innerText,link:e.href}))),t=a.safeQuery(()=>{var e;const t=document.querySelector("table.boards:nth-child(6) tbody tr:last-child td");return[{page:+a.removeBrackets(null===(e=t.querySelector("b"))||void 0===e?void 0:e.innerText),link:window.location.href,current:"current"}].concat(a.toArray(t.querySelectorAll("a")).filter(e=>+a.removeBrackets(e.innerText)).map(e=>({page:+a.removeBrackets(e.innerText),link:e.href,current:""})))});return n.Container({},n.Header(),n.Hero(),n.ThreadBoard(e,a.getCategoryGroups(),t))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),a=r(0),o=(e,t)=>{const r=document.createElement("button");return r.textContent="delete",r.classList.add("delete"),r.onclick=function(r){const n=JSON.parse(localStorage.getItem("savedThreads")||"[]")||[],a=JSON.stringify(n.filter(t=>t.link!==e));localStorage.setItem("savedThreads",a),t.setAttribute("threads",a)},[r]},s=()=>{const e=document.createElement("div");return e.classList.add("modal-content"),e.onclick=e=>e.stopPropagation(),[a.render(e,n.el("div",{},n.el("div",{class:"modal-header"},n.el("h2",{},n.t("saved threads"))),n.el("div",{class:"modal-body"},n.el("saved-threads-filter",{}))))]};t.SavedThreadsModal=()=>{const e=document.createElement("div");return e.classList.add("modal-container"),e.onclick=function(e){e.target.remove()},[a.render(e,s())]};class l extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var e;const t=JSON.parse(localStorage.getItem("savedThreads")||"[]")||[],r=document.createElement("div"),n=document.createElement("saved-threads");n.setAttribute("threads",JSON.stringify(t));const a=document.createElement("input");a.placeholder="Search...",a.addEventListener("input",e=>function(e,t){const r=JSON.parse(localStorage.getItem("savedThreads")||"[]")||[];t.setAttribute("threads",JSON.stringify(r.filter(t=>t.title.toLowerCase().includes(e.toLowerCase()))))}(e.target.value,n)),r.classList.add("filter"),r.appendChild(a);const o=document.createElement("style");o.textContent="\n      .filter {\n        padding: 1.5em 2em;\n      }\n      \n      .filter input {\n        display: block;\n        width: 100%;\n        font-size: 0.97rem;\n        font-family: Roboto;\n        border: 2px solid var(--dark-gray);\n        padding: 0.5em;\n        border-radius: 0.3em;\n        box-sizing: border-box;\n      }\n      \n      .filter input:focus {\n        outline: none;\n        border-color: #86de85;\n      }\n    ",null===(e=this.shadowRoot)||void 0===e||e.append(o,r,n)}}class c extends HTMLElement{static get observedAttributes(){return["threads"]}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var e;const t=document.createElement("style");t.textContent="\n      .saved-threads {\n        max-height: 20em;\n        overflow-y: auto;\n        padding-bottom: 1.5em;\n      }\n      \n      .saved-threads > div > * + * {\n        border-top: 1px solid var(--dark-gray);\n      }\n      \n      .saved-thread {\n        display: flex;\n        justify-content: space-between;\n        align-items: baseline;\n        padding: 1em 2em;\n      }\n\n      p.no-thread {\n        padding: 1em 2em;\n        text-align: center;\n        text-transform: capitalize;\n      }\n      \n      .saved-thread > div > p:first-child {\n        text-transform: capitalize;\n        margin-bottom: 0.4em;\n      }\n      \n      .saved-thread > div > p:first-child a {\n        color: inherit;\n        text-decoration: none;\n      }\n      \n      .saved-thread > div > p:last-child {\n        color: #727d72;\n        font-size: 0.95rem;\n      }\n      \n      .saved-thread a.author {\n        color: inherit;\n        text-decoration: none;\n        text-decoration: underline;\n      }\n      \n      .saved-thread button.delete {\n        text-transform: capitalize;\n        font-size: 0.95rem;\n        border-radius: 0.3em;\n        color: var(--danger);\n        border: 0;\n        font-family: inherit;\n        background: transparent;\n        margin-left: 0.5rem;\n        cursor: pointer;\n      }\n      \n      .saved-thread button.delete:hover {\n        text-decoration: underline;\n      }\n    ",null===(e=this.shadowRoot)||void 0===e||e.appendChild(t),d(JSON.parse(this.getAttribute("threads")||"[]")||[],this)}attributeChangedCallback(e,t,r){"threads"===e&&d(JSON.parse(r)||[],this)}}function d(e,t){var r,s;let l;try{l=null===(r=t.shadowRoot)||void 0===r?void 0:r.querySelector(".saved-threads"),l.querySelectorAll("*").forEach(e=>e.remove())}catch(e){l=document.createElement("div"),l.classList.add("saved-threads")}if(e.length)a.render(l,n.el("div",{},...e.map(e=>{return r=e,a=t,n.el("div",{class:"saved-thread"},n.el("div",{},n.el("p",{},n.el("a",{href:r.link},n.t(r.title))),n.el("p",{},n.t("by "),n.el("a",{class:"author",href:"/"+r.author},n.t(r.author)),n.t(": "+r.timeOfPub))),o(r.link,a));var r,a})));else{const e=document.createElement("p");e.classList.add("no-thread"),e.append("no saved threads"),l.append(e)}null===(s=t.shadowRoot)||void 0===s||s.appendChild(l)}window.customElements.define("saved-threads",c),window.customElements.define("saved-threads-filter",l)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),a=r(0);t.NewsPage=function(){const e=a.safeQuery(()=>a.toArray(document.querySelectorAll("table[summary='links'] > tbody > tr > td a")).map(e=>({title:e.innerText,link:e.href}))),t=a.safeQuery(()=>{var e;const t=document.querySelector("table[summary='links'] + p");return[{page:+a.removeBrackets(null===(e=t.querySelector("b"))||void 0===e?void 0:e.innerText),link:window.location.href,current:"current"}].concat(a.toArray(t.querySelectorAll("a")).filter(e=>+a.removeBrackets(e.innerText)).map(e=>({page:+a.removeBrackets(e.innerText),link:e.href,current:""}))).sort((e,t)=>+e.page-+t.page)});return n.Container({},n.Header(),n.Hero(),n.ThreadBoard(e,JSON.parse(localStorage.getItem("categoryGroups")||"[]"),t))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),a=r(0);function o(e){return n.Container({},n.Header(),n.ThreadMetaComp(e),n.Thread((t=e.author,a.safeQuery(()=>{const e=a.toArray(document.querySelectorAll("table[summary='posts'] td:not(.pu.pd)")),r=[];for(;e.length>0;)r.push(e.splice(0,2));return r.map(([e,r])=>{var n;let o=a.safeQuery(()=>r.querySelector("div.narrow > blockquote > a"));return o=o&&new URL(o.href).pathname.startsWith("/post")?o.innerText:t,{replyingTo:o,author:a.safeQuery(()=>e.querySelector("a.user").innerText)||"Nobody",timeOfPub:e.querySelector("span.s").innerText,html:null===(n=r.querySelector("div.narrow"))||void 0===n?void 0:n.innerHTML,likes:a.safeQuery(()=>+r.querySelector("p.s b").innerText.match(/\d+/)[0])||0,shares:a.safeQuery(()=>+r.querySelector("p.s b:last-child").innerText.match(/\d+/)[0])||0,attachmentImages:a.toArray(r.querySelectorAll("img.attachmentimage")).map(e=>e.src)}})})),e));var t}t.ThreadPage=o,t.renderThread=function(e){const t=JSON.parse(localStorage.getItem("savedThreads")||"[]")||[],r=t.find(t=>t.link==="https://www.nairaland.com/"+e);console.log("saved",t),r?a.render(document.body,o(r)):window.fetch("https://www.nairaland.com/"+e).then(e=>e.text()).then(e=>e.match(/<body>([\w\W\s]*?)<\/body>/)[1]).then(e=>{const t=document.createElement("div");return t.innerHTML=e,t}).then(t=>a.safeQuery(()=>{const r=t.querySelector("table[summary='posts'] td:not(.pu.pd)");return{link:"https://www.nairaland.com/"+e,title:r.querySelector("a[href]").innerText,author:r.querySelector("a.user").innerText,timeOfPub:r.querySelector("span.s").innerText}})).then(e=>{console.log("threadMeta",e),a.render(document.body,o(e))})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),a=r(0);function o(e,t){const r=a.safeQuery(()=>a.toArray(document.querySelectorAll("table:not([summary]) tbody tr td > b > a")).map(e=>({title:e.innerText,link:e.href}))),o=a.safeQuery(()=>{var e;const t=document.querySelector("table:not([summary]) + p");return[{page:+a.removeBrackets(null===(e=t.querySelector("b"))||void 0===e?void 0:e.innerText),link:window.location.href,current:"current"}].concat(a.toArray(t.querySelectorAll("a")).filter(e=>+a.removeBrackets(e.innerText)).map(e=>({page:+a.removeBrackets(e.innerText),link:e.href,current:""}))).sort((e,t)=>+e.page-+t.page)});return n.Container({},n.Header(),n.Hero(),n.ThreadBoard(r,e,o,t))}t.ThreadBoardPage=o,t.renderBoard=function(e,t){a.render(document.body,o(e,t))}}]);